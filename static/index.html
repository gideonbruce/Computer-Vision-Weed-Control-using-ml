<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Weed Detection</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
        #preview { max-width: 300px; display: block; margin: 20px auto; }
        .hidden { display: none; }
    </style>
</head>
<body>

    <h1>Weed Detection System</h1>
    
    <input type="file" id="fileInput" accept="image/*">
    <br><br>
    
    <img id="preview" class="hidden">
    
    <button onclick="uploadImage()">Detect Weed</button>
    
    <h2 id="result"></h2>

    <script>
        function uploadImage() {
            const fileInput = document.getElementById("fileInput");
            if (!fileInput.files.length) {
                alert("Please select an image.");
                return;
            }

            const file = fileInput.files[0];
            const formData = new FormData();
            formData.append("file", file);

            // Show image preview
            const preview = document.getElementById("preview");
            preview.src = URL.createObjectURL(file);
            preview.classList.remove("hidden");

            fetch("/predict", { method: "POST", body: formData })
                .then(response => response.json())
                .then(data => {
                    let resultText = `Prediction: ${data.prediction}`;
                    if (data.confidence) {
                        resultText += ` (Confidence: ${data.confidence})`;
                    }
                    document.getElementById("result").innerText = resultText;
                })
                .catch(error => console.error("Error:", error));
        }
    </script>

</body>
</html>
